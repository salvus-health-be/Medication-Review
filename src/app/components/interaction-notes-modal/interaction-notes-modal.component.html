<div class="modal-overlay" (click)="onCancel()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2>Add Note for Interaction</h2>

    <div class="interaction-info" *ngIf="interaction">
      <div class="info-row">
        <span class="info-label">Interaction:</span>
        <span class="info-value">{{ getInteractionTitle() }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">Type:</span>
        <span class="info-value">{{ interactionType === 'drug-drug' ? ('interaction_types.drug_drug' | transloco) : ('interaction_types.drug_food' | transloco) }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">Severity:</span>
        <span class="info-value">{{ interaction.severity }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">Number:</span>
        <span class="info-value">#{{ interaction.interactionNumber }}</span>
      </div>
    </div>

    <div class="form-section">
      <label for="note-text">Note:</label>
      <textarea 
        id="note-text"
        [(ngModel)]="noteText"
        placeholder="Enter your note about this interaction..."
        rows="6"
      ></textarea>
      
      <!-- Preset buttons -->
      <div class="preset-buttons">
        <button 
          type="button"
          class="preset-btn"
          (click)="addPresetText('notes.preset_advice_alternative')"
        >
          {{ 'notes.preset_advice_alternative' | transloco }}
        </button>
        <button 
          type="button"
          class="preset-btn"
          (click)="addPresetText('notes.preset_inform_patient')"
        >
          {{ 'notes.preset_inform_patient' | transloco }}
        </button>
      </div>
    </div>

    <div class="toggle-section">
      <button 
        type="button"
        class="toggle-button"
        [class.active]="addToPatientConversation"
        (click)="addToPatientConversation = !addToPatientConversation"
      >
        <span class="toggle-icon">{{ addToPatientConversation ? '✓' : '' }}</span>
        <span class="toggle-text">Add to patient conversation</span>
      </button>

      <button 
        type="button"
        class="toggle-button"
        [class.active]="addToGpReport"
        (click)="addToGpReport = !addToGpReport"
      >
        <span class="toggle-icon">{{ addToGpReport ? '✓' : '' }}</span>
        <span class="toggle-text">Add to GP report</span>
      </button>
    </div>

    <div class="button-row">
      <button class="btn-secondary" (click)="onCancel()">{{ 'common.cancel' | transloco }}</button>
      <button class="btn-primary" (click)="onAddToAnamnesis()">Add to anamnesis</button>
    </div>
  </div>
</div>
