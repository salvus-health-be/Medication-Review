<div class="modal-backdrop" (click)="onBackdropClick($event)">
  <div class="modal-container">
    <div class="modal-header">
      <h2>üìù {{ 'feedback.title' | transloco }}</h2>
      <button class="close-button" (click)="closeModal()" [title]="'common.close' | transloco">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <div class="modal-body">
      @if (showSuccess) {
        <div class="success-message">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
          <p>{{ 'feedback.success' | transloco }}</p>
        </div>
      } @else {
        <p class="subtitle">{{ 'feedback.subtitle' | transloco }}</p>
        
        <div class="form-group">
          <label for="feedbackText">{{ 'feedback.your_feedback' | transloco }}</label>
          <textarea
            id="feedbackText"
            [(ngModel)]="feedbackText"
            [placeholder]="'feedback.placeholder' | transloco"
            rows="5"
            [disabled]="isSubmitting"
            maxlength="2000"
          ></textarea>
          <span class="char-count">{{ feedbackText.length }}/2000</span>
        </div>

        @if (errorMessage) {
          <div class="error-message">
            {{ errorMessage | transloco }}
          </div>
        }
      }
    </div>

    @if (!showSuccess) {
      <div class="modal-footer">
        <button 
          class="cancel-button" 
          (click)="closeModal()" 
          [disabled]="isSubmitting">
          {{ 'common.cancel' | transloco }}
        </button>
        <button 
          class="submit-button" 
          (click)="submitFeedback()"
          [disabled]="isSubmitting || !feedbackText.trim()">
          @if (isSubmitting) {
            <span class="spinner"></span>
            {{ 'feedback.submitting' | transloco }}
          } @else {
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
            {{ 'feedback.submit' | transloco }}
          }
        </button>
      </div>
    }
  </div>
</div>
